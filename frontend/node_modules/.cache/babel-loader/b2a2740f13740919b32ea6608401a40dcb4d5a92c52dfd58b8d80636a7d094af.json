{"ast":null,"code":"import _regeneratorRuntime from\"D:/metaschool_web/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/metaschool_web/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/metaschool_web/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useHistory}from'react-router-dom';import{passwordValidator}from'../constants';import VrImage from'./../assets/VRImage.jpg';import Footer from\"../components/Footer/Footer.js\";import{useAuth}from\"contexts/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var UserLogin=function UserLogin(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),save_msg=_useState6[0],setsave_msg=_useState6[1];var history=useHistory();var _useAuth=useAuth(),setIsAuthenticated=_useAuth.setIsAuthenticated,isAuthenticated=_useAuth.isAuthenticated;var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:try{if(!passwordValidator.test(password)){setsave_msg(\"Password must contain at least 8 characters, 1 number, 1 upper and 1 lowercase!\");}else{fetch('https://metaschool.herokuapp.com/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_name:username,password:password})}).then(function(response){return response.json();}).then(function(data){localStorage.setItem(\"token\",data.accessToken);setIsAuthenticated(true);history.push(\"/admin/dashboard\");}).catch(function(error){setsave_msg(error.response.data.message);});}}catch(error){setsave_msg(error.response.data.message);}case 1:case\"end\":return _context.stop();}},_callee);}));return function signup(){return _ref.apply(this,arguments);};}();var authorization=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('https://metaschool.herokuapp.com/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_name:username,password:password})}).then(function(response){response.status===200?setIsAuthenticated(true):setsave_msg(\"!Invalid Email or Password\");}).catch(function(error){setsave_msg(error.response.data.message);});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function authorization(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{class:\"limiter\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"container-login100\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"wrap-login100\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"login100-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:VrImage,alt:\"IMG\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"login-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Meta School Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-div\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"user-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",minLength:\"3\",maxLength:\"20\",required:true,onChange:function onChange(e){setUsername(e.target.value);},placeholder:\"User Name\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"user-box\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",minLength:\"8\",maxLength:\"20\",required:true,onChange:function onChange(e){setPassword(e.target.value);},placeholder:\"Password\"})}),save_msg!==\"\"?/*#__PURE__*/_jsx(\"div\",{className:\"save-info\",children:/*#__PURE__*/_jsx(\"p\",{children:save_msg})}):\"\",/*#__PURE__*/_jsxs(\"div\",{className:\"submit-box\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",onClick:signup,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),\"Sign Up\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",onClick:authorization,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),\"Login\"]})]})]})]})]})}),/*#__PURE__*/_jsx(Footer,{fluid:true})]})});};export default UserLogin;","map":{"version":3,"names":["React","useState","useHistory","passwordValidator","VrImage","Footer","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserLogin","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","save_msg","setsave_msg","history","_useAuth","setIsAuthenticated","isAuthenticated","signup","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","test","fetch","method","headers","body","JSON","stringify","user_name","then","response","json","data","localStorage","setItem","accessToken","push","catch","error","message","stop","apply","arguments","authorization","_ref2","_callee2","_callee2$","_context2","status","children","class","src","alt","className","type","minLength","maxLength","required","onChange","e","target","value","placeholder","name","onClick","fluid"],"sources":["D:/metaschool_web/frontend/src/views/UserLogin.js"],"sourcesContent":["import  React, {useState} from \"react\";\r\nimport { useHistory } from 'react-router-dom';\r\nimport { passwordValidator } from '../constants';\r\nimport VrImage from './../assets/VRImage.jpg'\r\nimport Footer from \"../components/Footer/Footer.js\";\r\nimport { useAuth } from \"contexts/AuthContext\";\r\n\r\nconst UserLogin = () => {\r\n    const [username, setUsername] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [save_msg, setsave_msg] = useState(\"\");\r\n    const history = useHistory();\r\n    const {setIsAuthenticated, isAuthenticated} = useAuth();\r\n    const signup = async () => {\r\n        try {\r\n            \r\n            if(!passwordValidator.test(password)){\r\n                setsave_msg(\"Password must contain at least 8 characters, 1 number, 1 upper and 1 lowercase!\")\r\n            }\r\n            else{\r\n                fetch('https://metaschool.herokuapp.com/signup', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                      'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({\r\n                      user_name: username,\r\n                      password: password\r\n                    })\r\n                  }).then(response => response.json())\r\n                .then(data => {\r\n                    localStorage.setItem(\"token\", data.accessToken);\r\n                    setIsAuthenticated(true)\r\n                    history.push(\"/admin/dashboard\");\r\n                })\r\n                .catch(error => {\r\n                    setsave_msg(error.response.data.message)\r\n                });\r\n            }\r\n        } catch (error) {\r\n            setsave_msg(error.response.data.message)\r\n        }\r\n    }\r\n\r\n    const authorization = async () => {\r\n        await fetch('https://metaschool.herokuapp.com/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                user_name: username,\r\n                password: password\r\n            })\r\n            }).then((response) => {\r\n                response.status === 200 ? setIsAuthenticated(true): setsave_msg(\"!Invalid Email or Password\"); \r\n            })\r\n        .catch(error => {\r\n            setsave_msg(error.response.data.message);\r\n        });\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <div class=\"limiter\">\r\n                <div class=\"container-login100\">\r\n                    <div class=\"wrap-login100\">\r\n                        <div class=\"login100-pic\">\r\n                            <img src={VrImage} alt=\"IMG\"/>\r\n                        </div>\r\n                        <div class=\"login-box\">\r\n                            <h2>Meta School Login</h2>\r\n                            <div className=\"login-div\">\r\n                                <div class=\"user-box\">\r\n                                    <input type=\"text\" minLength=\"3\" maxLength=\"20\" required onChange={(e)=>{ setUsername(e.target.value)}} placeholder=\"User Name\" />\r\n                                </div>\r\n                                <div class=\"user-box\">\r\n                                    <input type=\"password\"  name=\"password\" minLength=\"8\" maxLength=\"20\" required onChange={(e)=>{ setPassword(e.target.value)}} placeholder=\"Password\" />\r\n                                </div>\r\n                                {save_msg !== \"\" ?\r\n                                <div className='save-info'>\r\n                                    <p>{save_msg}</p>\r\n                                </div> : \"\"\r\n                                }\r\n                                <div className=\"submit-box\">\r\n                                    <button type=\"submit\" onClick={signup}>                    \r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        Sign Up</button>\r\n                                    <button type=\"submit\" onClick={authorization}>                    \r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        <span></span>\r\n                                        Login</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <Footer fluid />\r\n            </div>\r\n        </>\r\n    );\r\n    \r\n}\r\n\r\nexport default UserLogin;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}